<script>
    async function loadDashboard() {
        try {
            const response = await fetch('data.json');
            const data = await response.json();
            
            // Update the Metric Card for recent findings
            document.getElementById('recent-count').innerText = data.count;
            document.getElementById('filter-label').innerText = "Vulnerabilities since " + data.filter_used;
            
            // Populate the table with the time-filtered results
            const tableBody = document.getElementById('vuln-table-body');
            tableBody.innerHTML = data.vulnerabilities.map(v => `
                <tr>
                    <td>${v.qid}</td>
                    <td>${v.title}</td>
                    <td><span class="sev-badge">${v.severity}</span></td>
                    <td>${v.published}</td>
                </tr>
            `).join('');

        } catch (error) {
            console.error("Failed to load live data:", error);
        }
    }
    window.onload = loadDashboard;
</script>
